<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="mappers.Comment">
    
    
	<!-- 내림차순 정렬로 등록일 기준으로 최신순으로 받아온다. -->
    <select id="selectById" resultType="CommentVO">
    	SELECT id, title, content, state, helpful, score, mod_date AS modDate, reg_date AS regDate, user_id AS userId, company_id AS companyId
    	FROM  comment 
    	<choose>
   			 <when test="type != null and type.equals('user')">
					WHERE user_id=#{id} 
   			 </when>
    		 <when test="type != null and type.equals('company')">
					WHERE company_id=#{id} 
    		</when>
  		</choose>
    	
    	ORDER BY id DESC 
    	
    	<if test="start != null and limit != null and limit > 0">
    		limit #{start}, #{limit};
    	</if>
 </select>
  
    
 </mapper>